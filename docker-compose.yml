version: "3.7"
services:
    svc-caddy:
        restart: unless-stopped
        image: wexec-caddy:latest
        build:
            context: .
            dockerfile: Dockerfile.caddy
        volumes: 
            - type: bind
              source: ./etc/caddy
              target: /etc/caddy
            - type: bind
              source: ./var/www
              target: /var/www
            - type: bind
              source: ./var/data
              target: /var/data
        network_mode: host
    svc-whiteboard:
        restart: always
        image: wexec-whiteboard:latest
        build: https://github.com/jimcoggeshall/whiteboard.git
        ports:
            - "8080:8080/tcp"
        command: --config=./config.default.yml
    svc-whiteboard-test:
        restart: on-failure 
        image: wexec-whiteboard-test:latest
        build: https://github.com/lovasoa/whitebophir.git
        ports:
            - "9080:80"
        volumes:
            - /opt/app/server-data:/opt/app/server-data
